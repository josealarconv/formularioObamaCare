<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Approval Application | Insurance Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .step-indicator { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-calendar-picker-indicator { opacity: 0.5; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Componentes Reutilizables ---
        const InputField = ({ label, iconName, ...props }) => (
            <div className="space-y-1">
                <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">{label}</label>
                <div className="relative">
                    {iconName && (
                        <i data-lucide={iconName} className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 w-5 h-5"></i>
                    )}
                    <input 
                        {...props}
                        className={`w-full ${iconName ? 'pl-12' : 'px-4'} pr-4 py-3.5 bg-slate-50 border-2 border-transparent focus:border-blue-500 focus:bg-white rounded-2xl transition-all outline-none font-semibold text-slate-700 shadow-sm`}
                    />
                </div>
            </div>
        );

        const CheckboxGroup = ({ label, options, value, onChange }) => (
            <div className="space-y-2">
                <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">{label}</label>
                <div className="flex gap-2">
                    {options.map(opt => (
                        <button
                            key={opt.val}
                            type="button"
                            onClick={() => onChange(opt.val)}
                            className={`flex-1 py-3 px-4 rounded-xl text-xs font-bold border-2 transition-all flex items-center justify-center gap-2 ${value === opt.val ? 'border-blue-600 bg-blue-50 text-blue-600' : 'border-slate-100 bg-white text-slate-400 hover:border-slate-200'}`}
                        >
                            <div className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${value === opt.val ? 'border-blue-600 bg-blue-600' : 'border-slate-300'}`}>
                                {value === opt.val && <div className="w-1.5 h-1.5 bg-white rounded-full"></div>}
                            </div>
                            {opt.label}
                        </button>
                    ))}
                </div>
            </div>
        );

        // --- AplicaciÃ³n Principal ---
        function App() {
            const [step, setStep] = useState(1);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [done, setDone] = useState(false);
            const [formData, setFormData] = useState({
                // Applicant
                app_apply_ins: false, app_last: '', app_name: '', app_dob: '', app_gender: '', app_citizen: '', 
                app_uscis: '', app_ssn: '', app_status: '', app_tobacco: '', app_pregnant: '',
                app_address: '', app_apt: '', app_city: '', app_zip: '', app_phone: '', app_marital: '', app_email: '',
                app_employer: '', app_income: '', app_hrs: '', app_emp_phone: '',
                // Spouse
                sp_apply_ins: false, sp_last: '', sp_name: '', sp_dob: '', sp_gender: '', sp_citizen: '', 
                sp_uscis: '', sp_ssn: '', sp_status: '', sp_tobacco: '', sp_pregnant: '',
                sp_address: '', sp_apt: '', sp_city: '', sp_zip: '', sp_phone: '', sp_marital: '', sp_email: '',
                sp_employer: '', sp_income: '', sp_hrs: '', sp_emp_phone: '',
                // Plan
                plan_ins: '', plan_credit: '', plan_id: '', plan_premium: '', plan_start: '', plan_pay: '', notes: '',
                signature: '', ack: false
            });

            useEffect(() => { 
                if (window.lucide) {
                    window.lucide.createIcons(); 
                }
            }, [step, done]);

            const nextStep = () => setStep(s => s + 1);
            const prevStep = () => setStep(s => s - 1);

            const handleSubmit = (e) => {
                e.preventDefault();
                if(!formData.ack) return;
                setIsSubmitting(true);
                setTimeout(() => {
                    setIsSubmitting(false);
                    setDone(true);
                }, 2000);
            };

            if (done) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6 animate-in fade-in zoom-in duration-500">
                        <div className="bg-white p-12 rounded-[3.5rem] shadow-2xl text-center max-w-sm w-full border border-blue-50">
                            <div className="bg-blue-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-8 text-white shadow-xl shadow-blue-200">
                                <i data-lucide="check" className="w-12 h-12"></i>
                            </div>
                            <h2 className="text-3xl font-extrabold text-slate-900 mb-4 tracking-tight">Application Sent</h2>
                            <p className="text-slate-500 mb-10 text-sm leading-relaxed">Your pre-approval application has been successfully transmitted to our underwriting team.</p>
                            <button onClick={() => window.location.reload()} className="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold shadow-lg active:scale-95 transition-all">Close</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-xl mx-auto pt-10 pb-24 px-6">
                    {/* Header */}
                    <div className="flex justify-between items-end mb-8">
                        <div>
                            <span className="text-blue-600 font-black text-xs uppercase tracking-[0.2em]">Insurance Portal</span>
                            <h1 className="text-3xl font-black text-slate-900 tracking-tighter">PRE-APPROVAL</h1>
                        </div>
                        <div className="text-right">
                            <p className="text-[10px] font-bold text-slate-400 uppercase">App ID</p>
                            <p className="text-sm font-black text-slate-900">#74291</p>
                        </div>
                    </div>

                    {/* Step Progress */}
                    <div className="flex gap-2 mb-10">
                        {[1, 2, 3].map(i => (
                            <div key={i} className={`h-1.5 rounded-full flex-1 transition-all duration-500 ${step >= i ? 'bg-blue-600' : 'bg-slate-200'}`} />
                        ))}
                    </div>

                    <form onSubmit={handleSubmit} className="space-y-8">
                        
                        {/* STEP 1: PRIMARY APPLICANT */}
                        {step === 1 && (
                            <div className="space-y-6 animate-in slide-in-from-right-8 duration-500">
                                <div className="flex items-center gap-3 mb-2">
                                    <div className="w-8 h-8 bg-blue-600 text-white rounded-lg flex items-center justify-center">
                                        <i data-lucide="user" className="w-5 h-5"></i>
                                    </div>
                                    <h2 className="text-xl font-bold text-slate-800 tracking-tight">Primary Applicant</h2>
                                </div>

                                <button 
                                    type="button"
                                    onClick={() => setFormData({...formData, app_apply_ins: !formData.app_apply_ins})}
                                    className={`w-full p-4 rounded-2xl border-2 flex items-center justify-between transition-all ${formData.app_apply_ins ? 'bg-blue-600 border-blue-600 text-white shadow-lg' : 'bg-white border-slate-100 text-slate-500'}`}
                                >
                                    <span className="font-bold text-sm">Applying for Insurance?</span>
                                    <i data-lucide={formData.app_apply_ins ? "check-square" : "square"} className="w-6 h-6"></i>
                                </button>

                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="Last Name" placeholder="Smith" value={formData.app_last} onChange={e => setFormData({...formData, app_last: e.target.value})} />
                                    <InputField label="First Name" placeholder="John" value={formData.app_name} onChange={e => setFormData({...formData, app_name: e.target.value})} />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="DOB" type="date" value={formData.app_dob} onChange={e => setFormData({...formData, app_dob: e.target.value})} />
                                    <CheckboxGroup 
                                        label="Gender" 
                                        options={[{label: 'M', val: 'M'}, {label: 'F', val: 'F'}]} 
                                        value={formData.app_gender} 
                                        onChange={v => setFormData({...formData, app_gender: v})} 
                                    />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <CheckboxGroup 
                                        label="US Citizen" 
                                        options={[{label: 'Yes', val: 'Y'}, {label: 'No', val: 'N'}]} 
                                        value={formData.app_citizen} 
                                        onChange={v => setFormData({...formData, app_citizen: v})} 
                                    />
                                    <InputField label="SSN" placeholder="000-00-0000" value={formData.app_ssn} onChange={e => setFormData({...formData, app_ssn: e.target.value})} />
                                </div>

                                <InputField label="Full Address" iconName="map-pin" placeholder="123 Fintech St" value={formData.app_address} onChange={e => setFormData({...formData, app_address: e.target.value})} />

                                <div className="grid grid-cols-3 gap-4">
                                    <InputField label="Apt #" value={formData.app_apt} onChange={e => setFormData({...formData, app_apt: e.target.value})} />
                                    <InputField label="City" className="col-span-2" value={formData.app_city} onChange={e => setFormData({...formData, app_city: e.target.value})} />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="Income ($)" placeholder="Annual Gross" type="number" value={formData.app_income} onChange={e => setFormData({...formData, app_income: e.target.value})} />
                                    <InputField label="Hrs/Week" type="number" value={formData.app_hrs} onChange={e => setFormData({...formData, app_hrs: e.target.value})} />
                                </div>

                                <button type="button" onClick={nextStep} className="w-full py-5 bg-blue-600 text-white rounded-[2rem] font-black text-lg shadow-xl shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-3">
                                    SPOUSE INFORMATION <i data-lucide="arrow-right" className="w-5 h-5"></i>
                                </button>
                            </div>
                        )}

                        {/* STEP 2: SPOUSE */}
                        {step === 2 && (
                            <div className="space-y-6 animate-in slide-in-from-right-8 duration-500">
                                <div className="flex items-center gap-3 mb-2">
                                    <div className="w-8 h-8 bg-indigo-600 text-white rounded-lg flex items-center justify-center">
                                        <i data-lucide="users" className="w-5 h-5"></i>
                                    </div>
                                    <h2 className="text-xl font-bold text-slate-800 tracking-tight">Spouse (Optional)</h2>
                                </div>

                                <button 
                                    type="button"
                                    onClick={() => setFormData({...formData, sp_apply_ins: !formData.sp_apply_ins})}
                                    className={`w-full p-4 rounded-2xl border-2 flex items-center justify-between transition-all ${formData.sp_apply_ins ? 'bg-indigo-600 border-indigo-600 text-white shadow-lg' : 'bg-white border-slate-100 text-slate-500'}`}
                                >
                                    <span className="font-bold text-sm">Spouse applying for Insurance?</span>
                                    <i data-lucide={formData.sp_apply_ins ? "check-square" : "square"} className="w-6 h-6"></i>
                                </button>

                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="Last Name" value={formData.sp_last} onChange={e => setFormData({...formData, sp_last: e.target.value})} />
                                    <InputField label="First Name" value={formData.sp_name} onChange={e => setFormData({...formData, sp_name: e.target.value})} />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <InputField label="DOB" type="date" value={formData.sp_dob} onChange={e => setFormData({...formData, sp_dob: e.target.value})} />
                                    <InputField label="SSN" value={formData.sp_ssn} onChange={e => setFormData({...formData, sp_ssn: e.target.value})} />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <CheckboxGroup 
                                        label="Tobacco" 
                                        options={[{label: 'Yes', val: 'Y'}, {label: 'No', val: 'N'}]} 
                                        value={formData.sp_tobacco} 
                                        onChange={v => setFormData({...formData, sp_tobacco: v})} 
                                    />
                                    <CheckboxGroup 
                                        label="Pregnant" 
                                        options={[{label: 'Yes', val: 'Y'}, {label: 'No', val: 'N'}]} 
                                        value={formData.sp_pregnant} 
                                        onChange={v => setFormData({...formData, sp_pregnant: v})} 
                                    />
                                </div>

                                <div className="flex gap-4">
                                    <button type="button" onClick={prevStep} className="flex-1 py-5 bg-white text-slate-400 border-2 border-slate-100 rounded-[2rem] font-bold text-lg active:scale-95 transition-all">Back</button>
                                    <button type="button" onClick={nextStep} className="flex-[2] py-5 bg-blue-600 text-white rounded-[2rem] font-black text-lg shadow-xl shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-3">
                                        PLAN & SIGNATURE <i data-lucide="arrow-right" className="w-5 h-5"></i>
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* STEP 3: PLAN & SIGNATURE */}
                        {step === 3 && (
                            <div className="space-y-6 animate-in slide-in-from-right-8 duration-500">
                                <div className="bg-slate-900 rounded-[2.5rem] p-8 text-white space-y-5 shadow-2xl">
                                    <h3 className="font-black text-lg flex items-center gap-2 tracking-tight">
                                        <i data-lucide="briefcase" className="w-5 h-5 text-blue-400"></i>
                                        PLAN INFORMATION
                                    </h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Insurance</label>
                                            <input className="w-full bg-white/10 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none" onChange={e => setFormData({...formData, plan_ins: e.target.value})} />
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Credit</label>
                                            <input className="w-full bg-white/10 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none" onChange={e => setFormData({...formData, plan_credit: e.target.value})} />
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Premium</label>
                                            <input className="w-full bg-white/10 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none" placeholder="$ 0.00" onChange={e => setFormData({...formData, plan_premium: e.target.value})} />
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Start Date</label>
                                            <input type="date" className="w-full bg-white/10 border-none rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none" onChange={e => setFormData({...formData, plan_start: e.target.value})} />
                                        </div>
                                    </div>
                                </div>

                                <div className="p-6 bg-blue-50 rounded-[2rem] border-2 border-blue-100">
                                    <div className="flex items-start gap-3">
                                        <input 
                                            type="checkbox" 
                                            id="ack" 
                                            className="mt-1 w-5 h-5 rounded accent-blue-600" 
                                            onChange={e => setFormData({...formData, ack: e.target.checked})}
                                        />
                                        <label htmlFor="ack" className="text-[10px] text-slate-600 leading-relaxed font-medium">
                                            I acknowledge that I have read all information. The information provided is true, voluntarily given, and not fraudulent. I authorize the Insurance Agent/Broker to help me purchase insurance and other services.
                                        </label>
                                    </div>
                                </div>

                                <div className="space-y-2">
                                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1">Signature of Applicant</label>
                                    <div className="bg-white border-2 border-slate-100 rounded-2xl h-32 flex items-center justify-center overflow-hidden relative group">
                                        <input 
                                            placeholder="Type full name to sign" 
                                            className="w-full h-full text-center font-serif italic text-3xl outline-none text-slate-800"
                                            onChange={e => setFormData({...formData, signature: e.target.value})}
                                        />
                                        <div className="absolute bottom-2 right-4 text-[10px] text-slate-300 pointer-events-none">E-Signature Verification Active</div>
                                    </div>
                                </div>

                                <div className="flex gap-4">
                                    <button type="button" onClick={prevStep} className="flex-1 py-5 bg-white text-slate-400 border-2 border-slate-100 rounded-[2rem] font-bold text-lg active:scale-95 transition-all">Back</button>
                                    <button 
                                        type="submit" 
                                        disabled={isSubmitting || !formData.ack}
                                        className={`flex-[2] py-5 rounded-[2rem] font-black text-lg shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95 ${formData.ack ? 'bg-blue-600 text-white shadow-blue-200' : 'bg-slate-200 text-slate-400 cursor-not-allowed'}`}
                                    >
                                        {isSubmitting ? <div className="w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"></div> : "SUBMIT APPLICATION"}
                                    </button>
                                </div>
                            </div>
                        )}
                    </form>

                    <footer className="mt-12 text-center text-slate-400">
                        <p className="text-[10px] font-black uppercase tracking-[0.2em] mb-1">Encrypted Secure Portal</p>
                        <p className="text-[9px] opacity-60">All information is processed under HIPAA compliance standards.</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
